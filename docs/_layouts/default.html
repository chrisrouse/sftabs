<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{ page.title }} | {{ site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

    <!-- Syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="{{ '/' | relative_url }}" style="text-decoration: none !important;">
                <img src="{{ '/assets/images/invert.png' | relative_url }}" alt="SF Tabs Logo" class="navbar-logo me-2">
                <strong>SF Tabs</strong>
                <span class="badge bg-warning text-dark ms-2" style="font-size: 0.8rem; vertical-align: middle;">Pre-release</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link{% if page.url == '/' %} active{% endif %}" href="{{ '/' | relative_url }}">
                            <i class="bi bi-house-fill me-1"></i>Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link{% if page.url contains 'installation' %} active{% endif %}" href="{{ '/installation' | relative_url }}">
                            <i class="bi bi-download me-1"></i>Installation
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link{% if page.url contains 'new-features' %} active{% endif %}" href="{{ '/new-features' | relative_url }}">
                            <i class="bi bi-stars me-1"></i>New Features
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link{% if page.url contains 'user-guide' %} active{% endif %}" href="{{ '/user-guide' | relative_url }}">
                            <i class="bi bi-book-fill me-1"></i>User Guide
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/chrisrouse/sftabs" target="_blank">
                            <i class="bi bi-github me-1"></i>GitHub
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar (only on documentation pages) -->
            {% if page.url != '/' %}
            <aside class="col-lg-3 col-xl-2 d-none d-lg-block sidebar">
                <div class="sidebar-sticky">
                    <h6 class="sidebar-heading">User Guide</h6>

                    <!-- Getting Started -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#gettingStarted" role="button" aria-expanded="true">
                            <i class="bi bi-chevron-down me-1"></i>Getting Started
                        </a>
                        <div class="collapse show" id="gettingStarted">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#opening-the-extension' | relative_url }}">Opening the Extension</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#adding-a-new-tab' | relative_url }}">Adding a New Tab</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#tab-types' | relative_url }}">Tab Types</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Dropdown Menus -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#dropdownMenus" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Dropdown Menus
                        </a>
                        <div class="collapse" id="dropdownMenus">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#creating-dropdown-menus' | relative_url }}">Creating Dropdowns</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#object-manager-dropdowns-automatic' | relative_url }}">Object Manager Dropdowns</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#manual-dropdowns-drag-and-drop' | relative_url }}">Manual Dropdowns</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#folder-style-tabs-menu-containers' | relative_url }}">Folder-Style Tabs</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Managing Tabs -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#managingTabs" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Managing Tabs
                        </a>
                        <div class="collapse" id="managingTabs">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#editing-tabs' | relative_url }}">Editing Tabs</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#reordering-tabs' | relative_url }}">Reordering Tabs</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#deleting-tabs' | relative_url }}">Deleting Tabs</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Keyboard Shortcuts -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#keyboardShortcuts" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Keyboard Shortcuts
                        </a>
                        <div class="collapse" id="keyboardShortcuts">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#keyboard-shortcuts' | relative_url }}">Overview</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#setting-up-shortcuts-in-firefox' | relative_url }}">Firefox Setup</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#setting-up-shortcuts-in-chrome' | relative_url }}">Chrome Setup</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Settings -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#settings" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Settings
                        </a>
                        <div class="collapse" id="settings">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#settings' | relative_url }}">Settings Overview</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#appearance' | relative_url }}">Appearance</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#behavior' | relative_url }}">Behavior</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#sync--storage' | relative_url }}">Sync & Storage</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Profiles -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#profiles" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Profiles
                        </a>
                        <div class="collapse" id="profiles">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#profiles' | relative_url }}">Profiles Overview</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#enabling-profiles' | relative_url }}">Enabling Profiles</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#creating-a-new-profile' | relative_url }}">Creating Profiles</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#switching-between-profiles' | relative_url }}">Switching Profiles</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#managing-profiles' | relative_url }}">Managing Profiles</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Import/Export -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#importExport" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Import/Export
                        </a>
                        <div class="collapse" id="importExport">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#importexport-configuration' | relative_url }}">Import/Export Overview</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#export-configuration' | relative_url }}">Export Configuration</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#import-configuration' | relative_url }}">Import Configuration</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Upgrading -->
                    <div class="sidebar-section">
                        <a class="sidebar-toggle" data-bs-toggle="collapse" href="#upgrading" role="button" aria-expanded="false">
                            <i class="bi bi-chevron-right me-1"></i>Upgrading to v2.0
                        </a>
                        <div class="collapse" id="upgrading">
                            <ul class="nav flex-column ms-3">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#upgrading-to-v200-migration-wizard' | relative_url }}">Migration Wizard</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#whats-being-migrated' | relative_url }}">What's Being Migrated</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ '/user-guide#after-migration' | relative_url }}">After Migration</a>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Troubleshooting -->
                    <div class="sidebar-section">
                        <a class="nav-link" href="{{ '/user-guide#troubleshooting' | relative_url }}">
                            <i class="bi bi-wrench me-2"></i>Troubleshooting
                        </a>
                    </div>

                    <!-- Other Pages -->
                    <h6 class="sidebar-heading mt-4">Other Pages</h6>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link{% if page.url == '/' %} active{% endif %}" href="{{ '/' | relative_url }}">
                                <i class="bi bi-house me-2"></i>Home
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link{% if page.url contains 'installation' %} active{% endif %}" href="{{ '/installation' | relative_url }}">
                                <i class="bi bi-download me-2"></i>Installation
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link{% if page.url contains 'new-features' %} active{% endif %}" href="{{ '/new-features' | relative_url }}">
                                <i class="bi bi-stars me-2"></i>New Features
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link{% if page.url contains 'configuration' %} active{% endif %}" href="{{ '/configuration' | relative_url }}">
                                <i class="bi bi-file-code me-2"></i>Configuration
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://github.com/chrisrouse/sftabs" target="_blank">
                                <i class="bi bi-github me-2"></i>GitHub
                            </a>
                        </li>
                    </ul>
                </div>
            </aside>
            {% endif %}

            <!-- Main content area -->
            <main class="{% if page.url != '/' %}col-lg-9 col-xl-10 ms-sm-auto{% else %}col-12{% endif %} px-md-4 main-content">
                <div class="content-wrapper">
                    {{ content }}
                </div>

                <!-- Footer -->
                <footer class="footer mt-5 py-4">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-6">
                                <p class="text-muted mb-0">
                                    Â© {{ 'now' | date: "%Y" }} SF Tabs. Open source project.
                                </p>
                            </div>
                            <div class="col-md-6 text-md-end">
                                <a href="https://github.com/chrisrouse/sftabs" class="text-muted text-decoration-none me-3" target="_blank">
                                    <i class="bi bi-github"></i> GitHub
                                </a>
                                <a href="https://github.com/chrisrouse/sftabs/issues" class="text-muted text-decoration-none" target="_blank">
                                    <i class="bi bi-bug"></i> Issues
                                </a>
                            </div>
                        </div>
                    </div>
                </footer>
            </main>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Sidebar collapse toggle -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Handle sidebar toggle chevron icons
            const toggles = document.querySelectorAll('.sidebar-toggle');
            toggles.forEach(toggle => {
                const target = toggle.getAttribute('href');
                const collapseElement = document.querySelector(target);

                if (collapseElement) {
                    collapseElement.addEventListener('show.bs.collapse', function() {
                        const icon = toggle.querySelector('i');
                        if (icon) {
                            icon.classList.remove('bi-chevron-right');
                            icon.classList.add('bi-chevron-down');
                        }
                    });

                    collapseElement.addEventListener('hide.bs.collapse', function() {
                        const icon = toggle.querySelector('i');
                        if (icon) {
                            icon.classList.remove('bi-chevron-down');
                            icon.classList.add('bi-chevron-right');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
